<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html dir="rtl"><head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<style type="text/css">
* {
	font-size: small;
}
.header, .sample-data {
	width: 100%;
}
.header td {
	border: 3px solid black;
	text-align: center;
	font-family: 'Droid Arabic Naskh';
}
.sample-data td {
	padding-left: 10px;
	border-top: 3px solid black;
	border-left: 3px solid black;
	text-align: left;
	vertical-align: top;
}
.part {
	text-align: justify;
}
.part, h1, h2, h3, th {
	font-family: 'Droid Arabic Naskh';
}
span.math {
	direction: ltr !IMPORTANT;
}
.figure {
	width: 100%;
	text-align: center;
}

.figure .caption {
	display:none;
}

.figure img {
	margin: 0 auto;
}
	</style>
</head>
<body>


<table class="header">
	<tbody><tr>
		<td rowspan="3"><h1><p>مسیر های خوشگل و زیبا</p>
</h1></td>
		<td>دوره تابستان المپیاد کامپیوتر ۱۳۹۵	

روز ۳</td>
	</tr>
	<tr>
		<td>محدودیت زمان: 1 ثانیه</td>
	</tr>
	<tr>
		<td>محدودیت حافظه: 256 مگابایت</td>
	</tr>
</tbody></table>
<div class="part">
<p>یک گراف جهتدار با n راس و m یال داریم که روی هر یال آن یک کاراکتر بین <code>a</code> تا <code>z</code> وجود دارد.دنباله <span class="math" dir="ltr"><em>S</em><sub>1</sub>, <em>S</em><sub>2</sub>, <em>S</em><sub>3</sub>, . . . , <em>S</em><sub><em>d</em></sub></span> به شما داده شده است.به ازای هر <span class="math" dir="ltr">1 ≤ <em>i</em> &lt; <em>d</em></span> طول کوتاهترین مسیر خوشگل بین <span class="math" dir="ltr"><em>S</em><sub><em>i</em></sub></span> و<span class="math" dir="ltr"><em>S</em><sub><em>i</em> + 1</sub></span>
 را چاپ کنید. یک مسیر خوشگل است اگر و تنها اگر کاراکترهای یال های مسیر 
را به ترتیب پشت سر هم بنویسیم به یک رشته زیبا برسیم. یک رشته زیباست اگر 
از هر دو طرف به یک طریق خوانده بشود.</p>

</div>
<h2>ورودی</h2>
<div class="part">
<p>در خط اول دو عدد <span class="math" dir="ltr"><em>n</em></span> و <span class="math" dir="ltr"><em>m</em></span> آمده است که تعداد راس ها و یال های گراف را نشان می دهند. در هر یک از <span class="math" dir="ltr"><em>m</em></span> خط بعدی دو عدد <span class="math" dir="ltr">ٓ<em>X</em><sub><em>i</em></sub></span> و <span class="math" dir="ltr"><em>Y</em><sub><em>i</em></sub></span> و یک کاراکتر آمده است که به ترتیب راس ورودی، راس خروجی و کاراکتر روی یال <span class="math" dir="ltr"><em>i</em></span> ام را نشان می دهد. در خط بعدی عدد <span class="math" dir="ltr"><em>d</em></span> آمده است. در آخرین خط <span class="math" dir="ltr"><em>d</em></span> عدد آمده است که عدد <span class="math" dir="ltr"><em>i</em></span> ام نشان دهنده <span class="math" dir="ltr"><em>S</em><sub><em>i</em></sub></span> می باشد.</p>
<ul>
<li><span class="math" dir="ltr">1 ≤ <em>n</em> ≤ 400</span></li>
<li><span class="math" dir="ltr">1 ≤ <em>m</em> ≤ 60000</span></li>
<li><span class="math" dir="ltr">1 ≤ <em>d</em> ≤ 100</span></li>
<li><span class="math" dir="ltr">1 ≤ <em>S</em><sub><em>i</em></sub>, <em>X</em><sub><em>i</em></sub>, <em>Y</em><sub><em>i</em></sub> ≤ <em>n</em></span></li>
<li><span class="math" dir="ltr"><em>S</em><sub><em>i</em></sub> ≠ <em>S</em><sub><em>i</em> + 1</sub></span></li>
</ul>

</div>
<h2>خروجی</h2>
<div class="part">
<p>خروجی شامل<span class="math" dir="ltr"><em>d</em> − 1</span> خط است. در خط <span class="math" dir="ltr"><em>i</em></span> ام طول کوتاه ترین مسیر خوشگل بین رئوس <span class="math" dir="ltr"><em>S</em><sub><em>i</em></sub></span> و<span class="math" dir="ltr"><em>S</em><sub><em>i</em> + 1</sub></span> را چاپ کنید. در صورتی که چنین مسیری وجود ندارد عدد <span class="math" dir="ltr"> − 1</span> را چاپ کنید.</p>

</div>

<table class="sample-data" cellspacing="10px">
	<tbody><tr>
		<th>ورودی نمونه</th>
		<th>خروجی نمونه</th>
	</tr>
	
	<tr>
		<td><pre dir="ltr">6 7
1 2 a
1 3 x
1 4 b
2 6 l
3 5 y
4 5 z
6 5 a
3
1 5 3
</pre></td>
		<td><pre dir="ltr">3
-1
</pre></td>
	</tr>
	
	
	
	
	
</tbody></table>

<div class="part">
	

</div>






</body></html>